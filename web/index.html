<!DOCTYPE html>
<html>

<head>
  <!-- âœ… WebGazer -->
  <script src="https://webgazer.cs.brown.edu/webgazer.js"></script>
  <script>
    let clicks = 0;

    function startWebGazer() {
      webgazer.setRegression('ridge')
        .setGazeListener((data, elapsedTime) => {
          if (data) {
            console.log("X: " + data.x + ", Y: " + data.y);
          }
        })
        .showVideoPreview(true)         // show webcam
        .showPredictionPoints(true)     // show red gaze dots
        .begin();

      // ðŸ§  Calibration: Record gaze where you click
      document.body.addEventListener('click', function (e) {
        if (clicks < 9) { // Limit to 9 calibration points
          webgazer.recordScreenPosition(e.clientX, e.clientY, 'click');
          clicks++;
          console.log("ðŸ§  Training point " + clicks + " added.");
        }
      });
    }
  </script>

  <!-- Flutter default meta setup -->
  <base href="$FLUTTER_BASE_HREF">
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="EduGazer: Eye Tracking for Learning Insights">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="edugazer">
  <link rel="apple-touch-icon" href="icons/Icon-192.png">

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="favicon.png" />

  <title>EduGazer Demo</title>
  <link rel="manifest" href="manifest.json">
</head>

<body>
  <script src="flutter_bootstrap.js" async></script>
</body>

</html>